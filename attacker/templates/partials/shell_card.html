<div class="status-card hidden-until-loaded if_auth" id="shell-remote-card">
    <h4>üõ∞Ô∏è Launch a reverse shell on port:</h4>
    <span class="button-span">
        <input type="number" id="shell-port" min="1024" max="65535" value="9001" required>
        <button onclick="launchShell()" class="btn" id="launch-shell-btn">Launch Shell</button>
    </span>
    <div id="shell-output" class="output-message hidden"></div>

    <script>
        function displayMessage(element, message, { color = 'black', hidden = false } = {}) {
            element.textContent = message;
            element.style.color = color;
            element.classList.toggle('hidden', hidden);
        }

        // Launch a reverse shell by sending a request to the server
        async function launchShell() {
            const shelldom = {
                portInput: document.getElementById('shell-port'),
                shellOutput: document.getElementById('shell-output'),
            };

            displayMessage(shelldom.shellOutput, '', { hidden: true });

            const port = shelldom.portInput.value;
            const { data, status } = await fetchJSON('/getshell', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ port }),
            });

            if (!data) {
                displayMessage(shelldom.shellOutput, '‚ùå Network or server error.', { color: 'red', hidden: false });
                return;
            }

            const color = status === 200 ? 'green' : 'red';
            displayMessage(shelldom.shellOutput, data.message || '‚ùå An error occurred.', { color, hidden: false });
        }
    </script>
</div>

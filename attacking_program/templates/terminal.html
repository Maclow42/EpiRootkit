{% extends "base.html" %}
{% block content %}
<h2>ğŸ§  Terminal</h2>

<!-- Formulaire pour entrer la commande -->
<form method="post" action="{{ url_for('send') }}">
    <input type="text" name="command" placeholder="Entrez une commande..." autofocus>
    <button type="submit">Envoyer</button>
</form>

{% if response %}
    <!-- Afficher le rÃ©sultat de la derniÃ¨re commande exÃ©cutÃ©e -->
    <h3>ğŸ“©â€‹ RÃ©sultat de la derniÃ¨re commande</h3>
    <div class="terminal-response-row">
        <!-- Bloc pour stdout -->
        <div class="stdout-block">
            <h4>ğŸŸ¢ stdout</h4>
            <pre>{{ response.stdout }}</pre>
        </div>

        <!-- Bloc pour stderr -->
        <div class="stderr-block">
            <h4>ğŸ”´ stderr</h4>
            <pre>{{ response.stderr }}</pre>
        </div>
    </div>

    <!-- Afficher les stdout / stderr passÃ©s (historique de commandes) -->
    <h3>ğŸ“œ Historique des Commandes</h3>
    {% if history %}
        <ul class="history-list">
        {% for cmd in history %}
            <li>
                <details>
                    <summary>
                        <code>{{ cmd.command }}</code>  <!-- Texte cliquable -->
                    </summary>

                    <!-- Contenu Ã  afficher/masquer lorsque l'Ã©lÃ©ment <details> est dÃ©pliÃ© -->
                    <div class="command-details">
                        <div class="stdout">
                            <h5>ğŸ“¤ stdout:</h5>
                            <pre>{{ cmd.stdout }}</pre>
                        </div>
                        <div class="stderr">
                            <h5>ğŸ“¥ stderr:</h5>
                            <pre>{{ cmd.stderr }}</pre>
                        </div>
                    </div>
                </details>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>Aucune commande envoyÃ©e pour lâ€™instant.</p>
    {% endif %}
{% endif %}
{% endblock %}
